- id: 1
  request:
    # optional
    method: "get"
    url: "http://{{ HOST }}/api/books"
    headers:
      - "Content-Type: application/json"
  rules:
    - name: "HttpStatusEqualRule"
      expectedStatus: 200
    - name: "HttpBodyAtLeastOneRule"
      xpath: "//title"
      Expected: "Effective Go"
      
- id: 2
  request:
    # optional
    method: "post"
    url: "http://{{ HOST }}/api/books"
    headers:
      - "Content-Type: application/json"
    body: |
      {
          "title": "book3_title",
          "author": "book3_author"
      }
  rules:
    - name: "HttpStatusEqualRule"
      expectedStatus: 200
    - name: "HttpBodyEqualRule"
      xpath: "/title"
      Expected: "book3_title"
  export:
    xpath: "/id"
    # Extract the id value and export it to the variable MY_BOOK_ID
    exportTo: "MY_BOOK_ID"
    
- id: 3
  # 依赖 TestCase2
  # TestCase2 必须先执行
  dependOnIDs: [2]
  request:
    # optional
    method: "put"
    # The user-defined variable HOST and the variable MY_BOOK_ID
    # obtained in TestCase2 are used here.
    url: "http://{{ HOST }}/api/books/{{ MY_BOOK_ID }}"
    headers:
      - "Content-Type: application/json"
    body: |
      {
          "title": "book3_title",
          "author": "book3_author-2"
      }
  rules:
    - name: "HttpStatusEqualRule"
      expectedStatus: 200
    - name: "HttpBodyEqualRule"
      xpath: "/author"
      Expected: "book3_author-2"
